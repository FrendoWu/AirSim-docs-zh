<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  <link rel="shortcut icon" href="../img/favicon.ico">
  <title>Playing Logs - AirSim中文文档</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
  
  <script>
    // Current page data
    var mkdocs_page_name = "Playing Logs";
    var mkdocs_page_input_path = "playback.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="../js/jquery-2.1.1.min.js" defer></script>
  <script src="../js/modernizr-2.8.3.min.js" defer></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> AirSim中文文档</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
	  
          
            <li class="toctree-l1">
		
    <a class="" href="..">主页</a>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">搭建AirSim</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../use_precompiled/">下载二进制文件</a>
                </li>
                <li class="">
                    
    <a class="" href="../build_windows/">在Windows上构建</a>
                </li>
                <li class="">
                    
    <a class="" href="../build_linux/">Build on Linux</a>
                </li>
                <li class="">
                    
    <a class="" href="../unreal_custenv/">Creating Custom Environment</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Using AirSim</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../apis/">Core APIs</a>
                </li>
                <li class="">
                    
    <a class="" href="../image_apis/">Image APIs</a>
                </li>
                <li class="">
                    
    <a class="" href="../apis_cpp/">C++ APIs</a>
                </li>
                <li class="">
                    
    <a class="" href="../dev_workflow/">Development Workflow</a>
                </li>
                <li class="">
                    
    <a class="" href="../settings/">Settings</a>
                </li>
                <li class="">
                    
    <a class="" href="../camera_views/">Camera Views</a>
                </li>
                <li class="">
                    
    <a class="" href="../using_car/">Using Car</a>
                </li>
                <li class="">
                    
    <a class="" href="../remote_control/">Remote Control</a>
                </li>
                <li class="">
                    
    <a class="" href="../xbox_controller/">XBox Controller</a>
                </li>
                <li class="">
                    
    <a class="" href="../steering_wheel_installation/">Steering Wheel</a>
                </li>
                <li class="">
                    
    <a class="" href="../multi_vehicle/">Multiple Vehicles</a>
                </li>
                <li class="">
                    
    <a class="" href="../sensors/">Sensors</a>
                </li>
                <li class="">
                    
    <a class="" href="../lidar/">LIDAR</a>
                </li>
                <li class="">
                    
    <a class="" href="../ros/">ROS</a>
                </li>
                <li class=" current">
                    
    <a class="current" href="./">Playing Logs</a>
    <ul class="subnav">
            
    <li class="toctree-l3"><a href="#playback">Playback</a></li>
    
        <ul>
        
            <li><a class="toctree-l4" href="#side-by-side-comparison">Side-by-side comparison</a></li>
        
            <li><a class="toctree-l4" href="#parameters">Parameters</a></li>
        
        </ul>
    

    </ul>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Design</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../design/">Architecture</a>
                </li>
                <li class="">
                    
    <a class="" href="../code_structure/">Code Structure</a>
                </li>
                <li class="">
                    
    <a class="" href="../coding_guidelines/">Coding Guidelines</a>
                </li>
                <li class="">
                    
    <a class="" href="../flight_controller/">Flight Controller</a>
                </li>
                <li class="">
                    
    <a class="" href="../simple_flight/">Simple Flight</a>
                </li>
                <li class="">
                    
    <a class="" href="../hello_drone/">Hello Drone</a>
                </li>
    </ul>
	    </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">AirSim中文文档</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
        
          <li>Using AirSim &raquo;</li>
        
      
    
    <li>Playing Logs</li>
    <li class="wy-breadcrumbs-aside">
      
        <a href="https://github.com/FrendoWu/AirSim-docs-zh/edit/master/docs/playback.md"
          class="icon icon-github"> Edit on GitHub</a>
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="playback">Playback</h1>
<p>AirSim supports playing back the high level commands in a *.mavlink log file that were recorded using the MavLinkTest app
for the purpose of comparing real and simulated flight.
The <a href="logs/recording.mavlink">recording.mavlink</a> is an example of a log file captured using a real drone using the following
command line:</p>
<pre><code>MavLinkTest -serial:/dev/ttyACM0,115200 -logdir:. 
</code></pre>

<p>Then the log file contains the commands performed, which included several "orbit" commands, the resulting GPS map of the flight
looks like this:</p>
<p><img alt="real flight" src="../images/RealFlight.png" /></p>
<h2 id="side-by-side-comparison">Side-by-side comparison</h2>
<p>Now we can copy the *.mavlink log file recorded by MavLinkTest to the PC running the Unreal simulator with AirSim plugin.
When the Simulator is running and the drone is parked in a place in a map that has room to do the same maneuvers we can run this
MavLinkTest command line:</p>
<pre><code>MavLinkTest -server:127.0.0.1:14550
</code></pre>

<p>This should connect to the simulator.  Now you can enter this command:</p>
<pre><code>PlayLog recording.mavlink
</code></pre>

<p>The same commands you performed on the real drone will now play again in the simulator.  You can then press 't' to see
the trace, and it will show you the trace of the real drone and the simulated drone.  Every time you press 't' again
you can reset the lines so they are sync'd to the current position, this way I was able to capture a side-by-side trace of the
"orbit" command performed in this recording, which generates the picture below.  The pink line is the simulated
flight and the red line is the real flight:</p>
<p><img alt="playback" src="../images/Playback.png" /></p>
<p>Note: I'm using the ';' key in the simulator to take control of camera position using keyboard to get this shot.</p>
<h2 id="parameters">Parameters</h2>
<p>It may help to set the simulator up with some of the same flight parameters that your real drone is using, for example,
in my case I was using a lower than normal cruise speed, slow takeoff speed, and it helps to tell the simulator to
wait a long time before disarming (COM_DISARM_LAND) and to turn off the safety switches NAV_RCL_ACT and NAV_DLL_ACT
(<code>don't</code> do that on a real drone).</p>
<pre><code>param MPC_XY_CRUISE 2
param MPC_XY_VEL_MAX 2
param MPC_TKO_SPEED 1
param COM_DISARM_LAND 60
param NAV_RCL_ACT 0
param NAV_DLL_ACT 0
</code></pre>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../design/" class="btn btn-neutral float-right" title="Architecture">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../ros/" class="btn btn-neutral" title="ROS"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a href="https://github.com/FrendoWu/AirSim-docs-zh/" class="fa fa-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
        <span><a href="../ros/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../design/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme.js" defer></script>
      <script src="../search/main.js" defer></script>

</body>
</html>
